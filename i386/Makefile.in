# Makefile for i386
# Copyright 1999 Free Software Foundation, Inc.
#
# Permission to use, copy, modify and distribute this software and its
# documentation is hereby granted, provided that both the copyright
# notice and this permission notice appear in all copies of the
# software, derivative works or modified versions, and any portions
# thereof, and that both notices appear in supporting documentation.
#
# THE FREE SOFTWARE FOUNDATION ALLOWS FREE USE OF THIS SOFTWARE IN ITS
# "AS IS" CONDITION.  THE FREE SOFTWARE FOUNDATION DISCLAIMS ANY
# LIABILITY OF ANY KIND FOR ANY DAMAGES WHATSOEVER RESULTING FROM THE
# USE OF THIS SOFTWARE.




# Variables from `configure'.
srcdir=@srcdir@

# Programs found by configure.
LD = @LD@
MAKE = @MAKE@

# Rules. There are few rules because Makefrag does most things in i386.
all: sysdep.o

sysdep.o: linux/linux.o $(srcdir)/configure
	rm -f $@
	$(LD) -r -o $@ linux/linux.o

linux/linux.o: linux
	cd linux && $(MAKE) all

clean:
	rm -f sysdep.o
	cd linux && $(MAKE) clean

distclean: clean
	cd linux && $(MAKE) distclean
	rm -f config.status config.log Makefile

mostlyclean: distclean
	cd linux && $(MAKE) mostlyclean

maintainer-clean: mostlyclean
	rm -f $(srcdir)/configure
	cd linux && $(MAKE) maintainer-clean

install-headers:
install-kernel:




# Autoconf support

$(srcdir)/configure: configure.in
	cd $(srcdir) && autoconf

Makefile: Makefile.in config.status
	./config.status

config.status: configure
	./config.status --recheck

vpath %.in $(srcdir)
vpath configure $(srcdir)
