# i386/Makerules
# Copyright 2006 Free Software Foundation, Inc.
#
# Permission to use, copy, modify and distribute this software and its
# documentation is hereby granted, provided that both the copyright
# notice and this permission notice appear in all copies of the
# software, derivative works or modified versions, and any portions
# thereof, and that both notices appear in supporting documentation.
#
# THE FREE SOFTWARE FOUNDATION ALLOWS FREE USE OF THIS SOFTWARE IN ITS
# "AS IS" CONDITION.  THE FREE SOFTWARE FOUNDATION DISCLAIMS ANY
# LIABILITY OF ANY KIND FOR ANY DAMAGES WHATSOEVER RESULTING FROM THE
# USE OF THIS SOFTWARE.


#
# configure's findings.
#

DEFS-$(systype) = @DEFS@


#
# Glue code dependent Makerules
#

include $(abs_top_builddir)/$(systype)/linux/Makerules


# Some of the i386-specific code checks for these.
DEFINES += -DCONTINUATIONS -D__ELF__ -Di386 $(DEFS-$(systype))

# Arrange for a suitable load address.
LDFLAGS-kernel += -Ttext 100000

# `boothdr.o' has to be at the beginning.
kernel-objfiles-prepend = $(systype)/boothdr.o

kernel.o: $(kernel-objfiles-prepend)


#
# Autoconf support
#

$(abs_top_builddir)/$(systype)/Makerules: \
  $(abs_top_srcdir)/$(systype)/Makerules.in \
  $(abs_top_builddir)/$(systype)/config.status
	cd $(abs_top_builddir)/$(systype) && ./config.status $(@F)
